{"version":3,"file":"js/main.js","mappings":";;;;AAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,sCAAsC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,oBAAoB;AACpB,GAAG;AACH,CAAC","sources":["webpack://my-webpack-project/./js/main.js"],"sourcesContent":["\"use strict\";\r\n\r\nconst setLinkMenu = page => {\r\n  let menu = f.qS('#sideMenu');\r\n  if (!menu) return;\r\n\r\n  let target = menu.querySelector('.nav-item.active');\r\n  while (target) {\r\n    let wrap = target.closest('[data-role=\"link\"]');\r\n    if (!wrap) return;\r\n    target = wrap.previousElementSibling;\r\n    target.click();\r\n  }\r\n\r\n  for (let n of [...menu.querySelectorAll('a')]) {\r\n    let href = n.getAttribute('href') || '';\r\n    if(href.includes(page)) { n.parentNode.classList.add('active'); break; }\r\n  }\r\n}\r\n\r\nconst cancelFormSubmit = () => {\r\n  f.qA('form', 'keypress', e => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      return false;\r\n    }\r\n  });\r\n}\r\n\r\nconst stopPreloader = () => {\r\n  f.gI('preloader').remove();\r\n  f.gI('mainWrapper').classList.add('show');\r\n}\r\n\r\nconst setParentHeight = (target, height) => {\r\n  const n = target.closest(\"ul[aria-expanded=\\\"false\\\"]\");\r\n  if (n) {\r\n    n.style.height = (n.offsetHeight + height) + 'px';\r\n    setParentHeight(n.parentNode, height);\r\n  }\r\n}\r\n\r\n// Event function\r\n// ---------------------------------------------------------------------------------------------------------------------\r\n\r\nconst cmsEvent = function() {\r\n  let action = this.getAttribute('data-action');\r\n\r\n  let select = {\r\n    'menuToggle': () => {\r\n      f.gI('mainWrapper').classList.toggle('menu-toggle');\r\n      setTimeout(() => window.dispatchEvent(new Event('resize')), 200);\r\n    },\r\n    'exit' : () => {\r\n      location.href = f.SITE_PATH + `?mode=auth&authAction=exit`;\r\n    }\r\n  };\r\n\r\n  select[action] && select[action]();\r\n};\r\n\r\nconst sideMenuExpanded = (e, node) => {\r\n  e.preventDefault();\r\n\r\n  const nodeS  = node.nextElementSibling,\r\n        count  = nodeS.childElementCount,\r\n        height = count * 50;//e.target.parentNode.offsetHeight;\r\n\r\n  if( node.getAttribute('aria-expanded') === 'true'){\r\n    node.setAttribute('aria-expanded', 'false');\r\n    //setParentHeight(node, node.nextElementSibling.offsetHeight * -1);\r\n    nodeS.style.height = nodeS.dataset.height;\r\n\r\n    setTimeout(() => {\r\n      nodeS.style.height = '0';\r\n    }, 0);\r\n\r\n  } else {\r\n    node.setAttribute('aria-expanded', 'true');\r\n    nodeS.dataset.height = height + 'px';\r\n    nodeS.style.height = height + 'px';\r\n    //setParentHeight(node, height);\r\n    setTimeout(() => {\r\n      nodeS.style.height = 'auto';\r\n    }, 300);\r\n  }\r\n}\r\n\r\n// Event bind\r\n// -------------------------------------------------------------------------------------------------------------------\r\n\r\nconst onBind = () => {\r\n// Block Authorization\r\n  let node = f.gI(f.ID.AUTH_BLOCK);\r\n  node && node.querySelectorAll('[data-action]')\r\n              .forEach(n => n.addEventListener('click', cmsEvent));\r\n\r\n  //if (node) return;\r\n  // Menu Action\r\n  f.qA('#sideMenu [role=\"button\"]').forEach(n =>\r\n    n.addEventListener('click', e => sideMenuExpanded(e, n))\r\n  );\r\n\r\n  node = f.qS('[data-action=\"menuToggle\"]');\r\n  node && node.addEventListener('click', cmsEvent);\r\n}\r\n\r\n// Entrance function\r\n(() => {\r\n  let page = (f.CURRENT_PAGE && !f.OUTSIDE) ? f.CURRENT_PAGE : 'public';\r\n\r\n  if (page === '/' || f.gI('authForm')) return;\r\n  cancelFormSubmit();\r\n  onBind();\r\n  f.dictionaryInit();\r\n\r\n  setLinkMenu(page || '/');\r\n  f.relatedOption();\r\n  stopPreloader();\r\n\r\n  setTimeout(() => { // todo разобраться с синхронизацией\r\n    f.initShadow(); // todo убрать отсюда\r\n  }, 100);\r\n})();\r\n"],"names":[],"sourceRoot":""}